<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>AR Celestial Star Map</title>
  
  <!-- A-Frame and AR.js Libraries -->
  <script src="https://aframe.io/releases/1.2.0/aframe.min.js"></script>
  <script src="https://cdn.jsdelivr.net/gh/AR-js-org/AR.js/aframe/build/aframe-ar.js"></script>

  <!-- D3.js and Celestial Star Map Library -->
  <script type="text/javascript" src="../lib/d3.min.js"></script>
  <script type="text/javascript" src="../lib/d3.geo.projection.min.js"></script>
  <script type="text/javascript" src="../celestial.min.js"></script>
  <link rel="stylesheet" href="../celestial.css">
</head>

<body style="margin: 0; overflow: hidden;">
  <!-- AR.js and A-Frame setup for AR -->
  <a-scene embedded arjs>
    <!-- Define an AR Marker (such as a barcode or pattern) -->
    
      <a-entity id="celestial-map-entity" position="0 0 0" rotation="0 0 0">
        <!-- Placeholder for celestial map content -->
        <a-entity id="celestial-map"></a-entity>
      </a-entity>
      
      <!-- Camera for AR -->
      <a-entity camera></a-entity>
   
    
    <!-- Optional: Background color for AR scene -->
    <a-entity geometry="primitive: plane; width: 10; height: 10" material="color: #000;"></a-entity>
  </a-scene>

  <div id="celestial-form"></div>

  <script type="text/javascript">
    // D3-Celestial map config
    var config = {
      width: 0,  // Default width, 0 = full parent width
      projection: "aitoff",  // Projection used for the star map
      transform: "equatorial",  // Coordinate transformation
      center: null,
      orientationfixed: true,
      background: { fill: "#000000", stroke: "#000000", opacity: 1 },
      adaptable: true,
      interactive: true,
      disableAnimations: false,
      form: false,
      location: false,
      controls: true,
      container: "celestial-map",  // ID of the container for the map
      datapath: "../data/",  // Path to the data files
      stars: {
        show: true,
        limit: 6,
        colors: true,
        style: { fill: "#ffffff", opacity: 1 },
        names: true,
        data: 'stars.6.json'  // Stars data
      },
      dsos: {
        show: true,
        limit: 6,
        names: true,
        data: 'dsos.bright.json'  // Deep Space Objects data
      },
      constellations: {
        show: true,
        names: true,
        lines: true,
        linestyle: { stroke: "#cccccc", width: 1, opacity: 0.6 }
      },
    };

    // Display the celestial map using D3-Celestial
    Celestial.display(config);
    
    // Add Celestial map content to the AR scene as a 3D entity
    var celestialMapEntity = document.querySelector('#celestial-map');
    celestialMapEntity.innerHTML = `
      <a-entity position="0 0 0" rotation="0 0 0">
        <!-- Example content for the celestial map -->
        <a-sphere radius="1" color="red"></a-sphere>
      </a-entity>
    `;
  </script>
</body>
</html>
